# ansible_3

Условия для запуска playbook на агенте: ОС ubuntu, Open SSH сервер, пакет: python-apt. Подключение к агенту производится с помощью служебной учетной записи ansible_servce с помощью публичного ключа описанного в ansible.cfg

Общие пункты выполняемые в playbook.yml

1. Роль common установка основных пакетов (iotop,htop,mc,net-tools) 
2. Роль postgres-db добавление репозитория postgres, добавление ключа, установка БД postgres, копирование конфигурационного файла postgres.conf, активация и запуск службы postgres.
3. В playbook.yml используются переменные описанные в роли postgresql/defaults/main.yml для сброса пароля и изменения порта для подключения к БД.
4. Хэндлеры, для перезапуска службы postgres используются при при изменении конфигурационного файла, изменении пароля.